{% extends "base.html" %}
{% load two_factor %}

{% block content %}

<div class="container">

<div class="header">&nbsp;</div>

{% if user.is_authenticated %}
<div class="row">
  <div class="col-md-12 text-center">
  <H4>Welcome, {{ user.get_full_name }}</H4>
  </div>
</div>

<div class="header"><hr/></div>

<div class="row">
  <div class="col-md-6">
    <h4>User Details</h4>
    <hr/>
    <div class="row">
     <div class="col-md-4"><p class="font-weight-bold">Full Name</p></div>
     <div class="col-md-6"><p>{{ user.get_full_name }}</p></div>
    </div>

    <div class="row">
       <div class="col-md-4"><p class="font-weight-bold">Display Name</p></div>
       <div class="col-md-6"><p">{{ user.nickname }}</p></div>
    </div>

    <div class="row">
       <div class="col-md-4"><p class="font-weight-bold">Email</p></div>
       <div class="col-md-6"><p>{{ user.email }}</p></div>
    </div>

    <div class="row">
       <div class="col-md-4"><p class="font-weight-bold">Phone</p></div>
       <div class="col-md-6"><p>{{ user.phone }}</p></div>
    </div>

  </div>

  <div class="col-md-4">
    <h4>Group Membership</h4>
    <hr/>
    <div class="row">
      <div class="col-md-6">
        <ul>
          {% for department in user.departments.all %}
            <li> {{ department }}</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
<hr/>
<div class="row">
  <div class="col-md-12">
    <h4>Current SSH Key(s)</h4>
    <hr/>
    {% for key in user.userkeys_set.all %}
    <div class="row">
      <div class="col-md-8">{{ key.key_data }}</div>
      <div class="col-md-4">
          <p><b>Created</b><br>{{ key.created }}</p>
          <p><b>Updated</b><br>{{ key.updated }}</p>
          <p>Key is <b>{% if key.active %}Active{% else %}Disabled{% endif %}</b></p>
      </div>
    </div>
    <hr/>
    {% endfor %}
</div>

{% else %}
<hr>
<div class="row">
 <div class="col-md-6">
   <p>You are not logged in.</p>
   <p>Please, <a class="btn btn-primary" href="{% url 'login' %}">Log In</a></p>
 </div>
</div>
<hr>
{% endif %}

</div>

{% endblock content %}
